\chapter{ Implementation }

In this chapter we will present the implementation of the \PT. 

The analysis of the algorithm in all its complexity called for the development
of a more structurised template for carrying out numerical computations. The
\PT, being an extension to the \MH, would naturally share many similarities in
implementation when compared to the \PT. Both algorithms can have very
abstract formulations and can be carried out theoretically on any countably-
generated measurable space. Practical considerations will never go that far.
However, one cannot, in principle, discard problems like bayesian linear model
selection or some sort of analysis regarding calculations on lattices in the
Ising model. Because of the mulitude of potential applications, it was vital
that the implemention of the \PT\, was a flexible one. To attain
this goal, the object-oriented paradigm was applied, where the State Space and the Algorithm were conceived as two separate entities, as a possible
solution to the upper-mentioned problem.

Having realised the need for modularity, it seemed natural to take the whole idea one step further and develop a general template for Metropolis-Hastings-like simulations, going way beyond the idea of a task-specific computer programme. For there are other potential developments of the \MH\, that are being used. There are many similarities in stuctures of these algorithms. Our template's goal was therefore to provide basic building blocks used for simulations, leaving the practitioners concentrate on the analysis. To guarantee user-friendliness, the most common State Space, the multidimensional euclidean space, has been provided, so that the user could in principle carry out computations specifying only the required minimum - the density function of the measure of interest. With future releases of the software, more standard State Spaces are scheduled for implemention as well, giving the practitioners experience the potentials and drawbacks of Metropolis-Hastings-like stochastic simulations.

The implementation of the template was carried out using the \RR\, programming language. The intention behind this choice is its popularity among users that are not necessarily computer scientist, but practitioners using statistical simulations on the day-to-day basis. 

\RR\, offers several implemented meta-structures that enable basic object oriented programming techniques. Among these there are the \textbf{S3} classes, \textbf{S4} classes, and the most recent Reference Classes. The implementation of \Metro\, was carried out using Reference Classes. This choice was dictated by several reasons. First, only \textbf{S4} classes and Reference classes offer the possibility of basic type verification\footnote{Still far from the \Cpp\, standards though.}. This assured that no serious errors were introduced in the implementation phase and that users cannot provide absurd input for the algorithm. Moreover, the Reference Classes are the only implementation of objects that use passing arguments by reference, that a priori could saved some time in the calculations on unnecessary object copying\footnote{Altough no serious differences in execution time were actually spoted when comparing both the functionally programmed prototype with the object-oriented final version.}. Finally, the Reference Classes are considered to be highly compatible with \Cpp\, precompiled programmes called from \RR. This is a clear advantage, as the future shipments of \Metro\, are planned to be implemented in \Cpp, so that users can simulate faster that the whole programme was more memory efficient.   